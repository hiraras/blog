(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{337:function(n,a,t){"use strict";t.r(a);var e=t(14),o=Object(e.a)({},(function(){var n=this._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[n("h2",{attrs:{id:"nginx-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx-配置"}},[this._v("#")]),this._v(" Nginx 配置")]),this._v(" "),n("h3",{attrs:{id:"配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[this._v("#")]),this._v(" 配置")]),this._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v("server {\n    listen 80;\n    server_name _;\n    root /app/dist;\n    include /etc/nginx/mime.types;\n    proxy_set_header X-Forwarded-For $remote_addr;\n    proxy_set_header X-Forwarded-Proto $scheme;\n    proxy_set_header Host $http_host;\n    proxy_set_header X-Real-IP $remote_addr;\n    解决刷新端口丢失问题\n    if (-d $request_filename) {\n        rewrite [^/]$ $scheme://$http_host$uri/ permanent;\n    }\n    location / {\n        #   指定允许跨域的方法，*代表所有\n        add_header Access-Control-Allow-Methods *;\n        #   预检命令的缓存，如果不缓存每次会发送两次请求\n        add_header Access-Control-Max-Age 3600;\n        #   不带cookie请求，并设置为false\n        add_header Access-Control-Allow-Credentials false;\n\n        #   表示允许这个域跨域调用（客户端发送请求的域名和端口）\n        #   $http_origin动态获取请求客户端请求的域   不用*的原因是带cookie的请求不支持*号\n        add_header Access-Control-Allow-Origin $http_origin;\n\n        #   表示请求头的字段 动态获取\n        add_header Access-Control-Allow-Headers\n        $http_access_control_request_headers;\n\n        #   OPTIONS预检命令，预检命令通过时才发送请求\n        #   检查请求的类型是不是预检命令\n        if ($request_method = OPTIONS){\n            return 200;\n        }\n        #重定向到index.html\n        try_files $uri $uri/ /index.html;\n\n    }\n    #location / {\n        #重定向到index.html\n        #try_files $uri $uri/ /index.html;\n    #}\n    # bi\n    location /biApi/ {\n        proxy_pass http://172.18.8.111:28384/;\n        proxy_set_header X-Forwarded-For $remote_addr;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n    }\n    # 元数据\n    location /api/atlas-server {\n        proxy_pass http://172.18.8.111:21000/api/atlas;\n    }\n    #   离线开发\n    location /api/linkis-mg-gateway {\n        proxy_pass http://172.18.8.116:9001/api/rest_j;\n    }\n    location /api/resourcemanager/ {\n        proxy_pass http://172.18.8.207:8088/;\n    }\n    location /api/menu-manage-api/ {\n        proxy_pass http://172.18.8.111:21103/;\n    }\n    location /api {\n        proxy_pass http://172.18.8.111:20311;\n    }\n    #   调度\n    location /api/powerjob-server {\n        proxy_pass http://172.18.8.111:7701/;\n    }\n    #   网关\n    location /api/mp-gateway-api {\n        proxy_pass http://172.18.8.111:20311/api/user-center;\n    }\n\n    location /api/menu-manage-api {\n        proxy_pass http://172.18.8.111:21103;\n    }\n    #   用户中心\n    location /api/mp-user-center-api {\n        proxy_pass http://172.18.8.111:20312/api;\n    }\n\n    location /api/route {\n        proxy_pass http://172.18.8.111:3000/route;\n    }\n    #   调度\n    location /api/powerjob-server {\n        proxy_pass http://172.18.8.111:7701/;\n    }\n    #   数据源\n    location /api/datasource {\n        #proxy_pass http://172.18.8.111:20311/datasource/api/jobJdbcDatasource;\n        proxy_pass http://172.18.8.111:20311/datasource;\n    }\n\n    location /api/layout-service-api {\n        proxy_pass http://172.18.8.111:21008/;\n    }\n    location /api/resourcemanager/ {\n        proxy_pass http://172.18.8.111:8088/;\n    }\n    location /api/prometheus-api {\n        proxy_pass http://172.18.8.111:9090/api/v1;\n    }\n\n    #   实时开发\n    location /api/realtime-dev-admin/ {\n        proxy_pass http://172.18.8.111:20502/;\n    }\n\n    #   数据服务\n    location /api/data-service-admin {\n        proxy_pass http://172.18.8.111:21004/;\n    }\n    #   数据服务 - dqs\n    location /api/data-service-dqs {\n        proxy_pass http://172.18.8.111:21006/sql/execute;\n    }\n    #   数据服务 - 日志\n    location /api/data-service-log {\n        proxy_pass http://172.18.8.111:21005/;\n    }\n\n    #   元数据\n    location /api/atlas-server {\n        proxy_pass http://172.18.8.108:21000/api/atlas;\n    }\n\n    #   数据标准\n    location /api/data-standard-api {\n        proxy_pass http://172.18.8.111:20702/api;\n    }\n\n    #   数据质量\n    location /api/data-quality-api {\n        proxy_pass http://172.18.8.111:20802/quality;\n    }\n    #   数据资产\n    location /api/data-assets-api {\n        proxy_pass http://172.18.8.111:20902/data-assets-api;\n    }\n\n    #   数据指标\n    location /api/dataIndex-api {\n        proxy_pass http://172.18.8.111:20305/;\n    }\n    #   ETL\n    location /api/etlServer-api {\n        proxy_pass http://172.18.8.111:21202/;\n        #proxy_pass http://172.18.42.95:8080/;\n    }\n    # bi\n    location /biApi/ {\n        proxy_pass http://172.18.8.111:28384/;\n        proxy_set_header X-Forwarded-For $remote_addr;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n\n    }\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n        root /usr/share/nginx/html;\n    }\n}\n")])])])])}),[],!1,null,null,null);a.default=o.exports}}]);