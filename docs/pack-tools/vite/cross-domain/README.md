# vite 处理跨域

同源策略(仅在浏览器发生，是浏览器的规则): http 交互默认情况下只能在同协议、同域名同端口的两台终端进行

跨域：不满足同源策略时就会发生跨域

用户调用浏览器提供的请求 api 后，即便不同源，浏览器也会发出请求到对应服务器，对应服务器如果允许跨域就带上允许访问的请求头，如果不允许跨域就不带这个头，但是响应都会返回到浏览器。最终由浏览器根据是否有这个响应头判断是否要阻止请求

- 如果请求了一个不存在的地址，http 状态会为 404（服务器直接返回，控制台也会提示跨域）
- 如果请求资源跨域了，http 状态为 CORS error，状态码可能为 200，控制台提示跨域

```js
// vite 中配置代理
{
  server: {
    proxy: {
      "/api": {
        target: "http://www.360.com", // 代理地址
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, ""), // 重写请求地址
      },
    },
  },
}
```
