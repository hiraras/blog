## 事件循环

### 为什么会有事件循环？

js 是一个单线程的语言，所以无法实现异步任务机制，故浏览器通过实现事件循环机制来做到

js 有一个宏队列和微队列；一个宏任务加上微队列里的所有方法构成一个周期，不断循环执行这个周期就是所谓的事件循环

### 执行顺序

先执行宏队列里的第一个方法，完成后再去清空当前微队列里有的微任务，当微队列任务清空后，再执行第二个宏任务，在这个宏任务中如果微队列又增加了新的微任务（微任务执行的时候创建了新的微任务，那它也会在本轮执行），则再次清空微队列，最后再往后执行下一个宏任务，以此类推

### 分类

宏任务：

1. script 代码块，其中 new Promise()的参数函数会立即执行，async 函数 如果执行了，在第一个 await 之前的代码也会立即执行
2. setTimeout、setInterval
3. dom 监听
4. UI rendering
5. ajax

微任务：

1. promise.then 的回调
2. queueMicrotask,接受一个函数，并放入当前微任务队列
3. Mutation Observer API
