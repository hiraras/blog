## 回流和重绘

### 回流

当页面上的 dom 发生形变（可能是宽高变化，可能是间隙变化等）导致 dom 的位置需要发生变化，浏览器就需要重新计算更新后的 dom 的位置，这个过程叫做回流

### 重绘

- 当页面发生回流，则一定会伴随着重绘
- 当页面的 dom 的背景色、字体颜色、outline、阴影等发生变化，页面的 dom 位置不需要重新计算，只需要重新绘制时，会触发重绘

### 发生场景

1. 修改 DOM 元素的位置和大小，例如通过 JavaScript 修改元素的样式属性、添加或删除元素等;
2. 修改浏览器窗口的大小或滚动页面;
3. 修改 DOM 树的结构，例如添加或删除元素、修改元素的属性等;
4. 修改文本内容，例如通过 JavaScript 修改文本节点的内容或字体大小;
5. 修改 CSS 样式，例如修改元素的背景颜色、字体颜色、边框等;
6. 浏览器的初始渲染。

### 优化-尽量避免回流

1. 使用 transform
2. 创建多个 dom 节点时，使用 documentFragment
3. 避免使用 table 布局，table 中每个元素大小的改动都将导致整个 table 的重新计算
4. 对复杂动画，对其设置 position: fixed/absolute，尽可能使元素脱离文档流，减少对其他元素的影响
